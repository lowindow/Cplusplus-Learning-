虚函数

**哪些函数不能是虚函数**

1.首先，没有this指针的函数不能是虚函数，因为 需要this指针去访问虚函数表，所以静态成员函数、非成员函数不是虚函数

2.构造函数不能是虚函数 构造函数是用来初始化对象的，对象没有初始化的话，虚函数表也不存在

3.模板类成员函数不能是虚函数 虚函数表是在编译类的定义的时候确定函数地址，而模板成员函数实例化的时机（显式 主动声明模板类对象、隐式 调用模板函数、创建模板类对象的时候才实例化） 晚于虚函数表的确定

4.内联成员函数不能是虚函数，语义上没错，但内联成员函数是为了编译期间展开的，加`virtual`时，必须从虚函数表取地址，因此编译器会放弃内联优化

5.被=delete修饰的成员函数不能是虚函数

**派生类析构过程**

1. 派生类对象的虚函数表中，派生类析构函数隐式重写基类虚析；
2. 当通过「基类指针 / 引用删除派生类对象」时，`this`指针指向的是派生类对象的内存（包含派生类的虚函数表）；
3. 运行期通过`this`指针找到虚函数表中「派生类析构函数的地址」，先调用派生类析构；
4. 派生类析构执行完毕后，会**自动调用基类的析构函数**